<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Surat Cinta Digital ðŸ’Œ</title>
  <style>
    * {margin:0; padding:0; box-sizing:border-box;}
    body {
      font-family:'Poppins',sans-serif;
      height:100vh; display:flex; justify-content:center; align-items:center;
      background:linear-gradient(135deg,#4B0082,#000080,#000000);
      color:white; overflow:hidden;
    }
    .container {width:100%; height:100%; position:relative;}
    .slide {
      width:100%; height:100%; display:none; justify-content:center; align-items:center;
      flex-direction:column; text-align:center; position:absolute; top:0; left:0;
      transition:opacity 1s ease;
    }
    .slide.active {display:flex; animation:fadeIn 1s ease;}
    @keyframes fadeIn {from{opacity:0;}to{opacity:1;}}
    .typing {
      font-size:1.4em; width:70%; white-space:pre-wrap; overflow:hidden;
      border-right:3px solid white;
      animation:typing 3s steps(40,end),blink .7s step-end infinite;
    }
    @keyframes typing {from{width:0;}to{width:70%;}}
    @keyframes blink {50%{border-color:transparent;}}
    .btn {
      margin-top:15px; padding:8px 22px; background-color:rgba(255,255,255,0.2);
      border:none; border-radius:20px; color:white; cursor:pointer;
      font-size:1em; transition:0.3s;
    }
    .btn:hover {background-color:rgba(255,255,255,0.4);}
    video,img {border-radius:20px; box-shadow:0 0 20px rgba(255,255,255,0.2);}
    video {width:320px; max-width:90%; margin-bottom:10px;}
    p {font-size:1.1em; margin-bottom:10px;}

    /* Polaroid style */
    .polaroid-wrapper {
      position:relative;
      width:100%;
      display:flex;
      justify-content:center;
      align-items:center;
      gap:20px;
      margin:10px 0;
      flex-wrap:wrap;
    }
    .polaroid {
      opacity:0;
      background:white;
      color:black;
      padding:6px;
      border-radius:10px;
      width:120px;
      box-shadow:0 5px 15px rgba(0,0,0,0.4);
      transform:scale(0.8) rotate(var(--angle));
      transition:all 0.6s ease;
    }
    .polaroid img {
      width:100%;
      border-radius:6px;
      display:block;
    }
    .caption {
      font-size:0.7em;
      color:black;
      text-align:center;
      margin-top:4px;
    }

    /* Polaroid muncul satu-satu */
    .polaroid.show {
      opacity:1;
      transform:scale(1) rotate(var(--angle));
    }

    audio {
      position:absolute;
      bottom:15px;
      left:15px;
      width:200px;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- SLIDE 1 -->
    <div class="slide active" id="slide1">
      <div class="typing" id="typingText"></div>
      <button class="btn" onclick="nextSlide()">Buka ðŸ’Œ</button>
    </div>

    <!-- SLIDE 2 -->
    <div class="slide" id="slide2">
      <p>"Bahkan gula pun minder liat senyum kamu"</p>
      <img src="akmal.jpg" alt="Foto kenangan" width="250">
      <button class="btn" onclick="nextSlide()">Lanjut ðŸ“¸</button>
    </div>

    <!-- SLIDE 3 - Video -->
    <div class="slide" id="slide3">
      <p>"Jadi kangen masa ini"</p>
      <video controls>
        <source src="vid1 akmal.mp4" type="video/mp4">
      </video>
      <button class="btn" onclick="nextSlide()">Lanjut ðŸŽ¬</button>
    </div>

    <!-- SLIDE 4 - Polaroid -->
    <div class="slide" id="slide4">
      <p>"Tiap momen itu kayak polaroid, kecil tapi penuh makna."</p>
      <div class="polaroid-wrapper" id="polaroidSet1">
        <div class="polaroid" style="--angle:-5deg;"><img src="berdua.jpg"><div class="caption">kita dulu ðŸ©µ</div></div>
        <div class="polaroid" style="--angle:4deg;"><img src="lagii.jpg"><div class="caption">senyum kamu :)</div></div>
        <div class="polaroid" style="--angle:-7deg;"><img src="std.jpg"><div class="caption">inget tempat ini?</div></div>
      </div>
      <button class="btn" onclick="nextSlide()">Lanjut ðŸ’«</button>
    </div>

    <!-- SLIDE 5 - Video -->
    <div class="slide" id="slide5">
      <p>"Semua tentangmu akan selalu abadi"</p>
      <video controls>
        <source src="vid2 akmal.mp4" type="video/mp4">
      </video>
      <button class="btn" onclick="nextSlide()">Penutup ðŸ’œ</button>
    </div>

    <!-- SLIDE 6 - Polaroid akhir -->
    <div class="slide" id="slide6">
      <p>"Terima kasih udah jadi bagian kecil tapi indah di hidupku"</p>
      <div class="polaroid-wrapper" id="polaroidSet2">
        <div class="polaroid" style="--angle:-6deg;"><img src="klx.jpg"><div class="caption">favorit ðŸ’•</div></div>
        <div class="polaroid" style="--angle:5deg;"><img src="belakang.jpg"><div class="caption">waktu itu...</div></div>
        <div class="polaroid" style="--angle:-3deg;"><img src="kolase.jpg"><div class="caption">selalu aku simpan</div></div>
      </div>
      <button class="btn" onclick="nextSlide()">ðŸ’Œ Selesai</button>
    </div>

    <!-- SLIDE 7 - Penutup -->
    <div class="slide" id="slide7">
      <p style="font-size:1.5em;width:70%;">
        Terima kasih udah ngebaca dan ngelihat semua ini mal.. <br>
        Kamu selalu jadi bagian terbaik dalam cerita ini <br>
        ðŸ’œ Dari aku yang sederhana, untuk Maulana Abdullah Akmal ðŸ’œ
      </p>
    </div>

    <!-- MUSIK -->
    <audio id="bgMusic" loop autoplay>
      <source src="about you.unknown" type="audio/mpeg">
    </audio>
  </div>

  <script>
    const slides=document.querySelectorAll('.slide');
    const music=document.getElementById("bgMusic");
    const videos=document.querySelectorAll("video");
    let currentSlide=0;

    const text="Hai mal... ðŸ’œ\nTepat hari ini 18 November, 2 tahun aku mengagumimu\nAku cuma mau bilang sesuatu lewat cara kecil ini.\nJadi... baca dan lihat semuanya ya ðŸ˜Œ";
    let i=0, speed=50;

    function typeWriter(){
      if(i<text.length){
        document.getElementById("typingText").innerHTML+=text.charAt(i);
        i++; setTimeout(typeWriter,speed);
      }
    }

    function nextSlide(){
      slides[currentSlide].classList.remove('active');
      currentSlide++;
      if(currentSlide>=slides.length) currentSlide=0;
      slides[currentSlide].classList.add('active');

      // kalau slide punya polaroid, munculkan satu-satu
      const wrapper=slides[currentSlide].querySelector('.polaroid-wrapper');
      if(wrapper){
        const polaroids=wrapper.querySelectorAll('.polaroid');
        polaroids.forEach((p,idx)=>{
          setTimeout(()=>p.classList.add('show'), idx*500);
        });
      }
    }

    window.onload=function(){
      typeWriter();

      const playMusic=()=>{
        music.play().catch(()=>{});
        document.removeEventListener('click',playMusic);
      };
      document.addEventListener('click',playMusic);

      // musik fade in/out pas video main
      videos.forEach(v=>{
        v.addEventListener('play',()=>fadeMusicOut());
        v.addEventListener('pause',()=>fadeMusicIn());
        v.addEventListener('ended',()=>fadeMusicIn());
      });
    };

    function fadeMusicOut(){
      let vol=music.volume;
      const fade=setInterval(()=>{
        if(vol>0.1){vol-=0.05; music.volume=vol;}
        else clearInterval(fade);
      },100);
    }
    function fadeMusicIn(){
      let vol=music.volume;
      const fade=setInterval(()=>{
        if(vol<1){vol+=0.05; music.volume=vol;}
        else clearInterval(fade);
      },100);
    }
  </script>
</body>
</html>
